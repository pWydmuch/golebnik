<h2 style="text-align: center;" mat-dialog-title>Password change</h2>
<mat-dialog-content>
  <form #regForm="ngForm" [formGroup]="myForm" (ngSubmit)="submit()">
    <!-- Value: {{myForm.value | json}} -->
    <div class="formBody">
      <mat-form-field>
        <input
          matInput
          placeholder="Present password"
          [type]="hide ? 'password' : 'text'"
          formControlName="oldPassword"
          required
        />
        <mat-icon style="cursor: pointer;" matSuffix (click)="hide = !hide">{{
          hide ? "visibility_off" : "visibility"
        }}</mat-icon>
        <mat-hint align="end">min. 6 characters</mat-hint>
        <mat-error
          *ngIf="oldPasswordInput.errors?.minlength && oldPasswordInput.touched"
        >
          Password too short, min. 6 characters
        </mat-error>
        <mat-error
          *ngIf="oldPasswordInput.errors?.required && oldPasswordInput.touched"
        >
          Password is required
        </mat-error>
        <mat-error
          *ngIf="oldPasswordInput.errors?.maxlength && oldPasswordInput.touched"
        >
          Password too long
        </mat-error>

        <mat-error
          *ngIf="oldPasswordInput.errors?.pattern && oldPasswordInput.touched"
        >
          Forbidden character used
        </mat-error>
      </mat-form-field>

      <mat-form-field>
        <input
          matInput
          placeholder="New password"
          [type]="hideNew ? 'password' : 'text'"
          formControlName="newPassword"
          required
        />
        <mat-icon
          style="cursor: pointer;"
          matSuffix
          (click)="hideNew = !hideNew"
          >{{ hideNew ? "visibility_off" : "visibility" }}</mat-icon
        >
        <mat-hint align="end">min. 6 characters</mat-hint>
        <mat-error
          *ngIf="newPasswordInput.errors?.minlength && newPasswordInput.touched"
        >
          Password too short, min 6 characters
        </mat-error>
        <mat-error
          *ngIf="newPasswordInput.errors?.required && newPasswordInput.touched"
        >
          Password is required
        </mat-error>
        <mat-error
          *ngIf="newPasswordInput.errors?.maxlength && newPasswordInput.touched"
        >
          Password too long
        </mat-error>

        <mat-error
          *ngIf="newPasswordInput.errors?.pattern && newPasswordInput.touched"
        >
          Forbidden character used
        </mat-error>
      </mat-form-field>

      <mat-form-field>
        <input
          matInput
          placeholder="Repeat new password"
          [type]="hideConfirm ? 'password' : 'text'"
          formControlName="confirmPassword"
          [errorStateMatcher]="errorMatcher"
          required
        />
        <mat-icon
          style="cursor: pointer;"
          matSuffix
          (click)="hideConfirm = !hideConfirm"
          >{{ hideConfirm ? "visibility_off" : "visibility" }}</mat-icon
        >

        <mat-error *ngIf="myForm.hasError('passwordDoNotMatch')">
          Passwords don't match
        </mat-error>
        <mat-error
          *ngIf="
            confirmPasswordInput.errors?.maxlength &&
            confirmPasswordInput.touched
          "
        >
          Password too long
        </mat-error>

        <mat-error
          *ngIf="
            confirmPasswordInput.errors?.pattern && confirmPasswordInput.touched
          "
        >
          Forbidden character used
        </mat-error>
      </mat-form-field>

      <mat-dialog-actions>
        <button
          mat-raised-button
          [disabled]="myForm.invalid"
          color="primary"
          type="submit"
          style="margin-top: 10px; text-transform: uppercase;"
        >
          Save
        </button>
        <button
          mat-raised-button
          mat-dialog-close
          mat-dialog-close="false"
          style="
            margin-top: 10px;
            text-transform: uppercase;
            background-color: rgb(250, 220, 164);
          "
        >
          Cancel
        </button>
      </mat-dialog-actions>
    </div>
  </form>
</mat-dialog-content>
